{"version":3,"sources":["components/ProductList.js","queries/queries.js","components/AddProduct.js","components/ProductDetails.js","App.js","index.js"],"names":["ProductList","className","this","props","displayProducts","Component","getProductsQuery","gql","addProductQuery","getImpressionsQuery","AddProduct","state","name","submitForm","e","preventDefault","slice","variables","refetchQueries","query","onSubmit","bind","type","onChange","setState","target","value","compose","graphql","ProductDetails","startDate","endDate","count","toNumber","string","Number","filterDates","impressions","data","product","i","length","date","displayImpressions","Fragment","onClick","options","id","productId","App","selected","loading","products","map","key","client","ApolloClient","uri","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.43a37e6b.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nexport default class ProductList extends Component {\n\n    render() {\n        return (\n            <div className=\"list\">\n                <h3 className=\"list__heading\">Select a Pressure Point:</h3>\n                <div className=\"list__line\" />\n                <ul className=\"list__list\">\n                    {this.props.displayProducts()}\n                </ul>\n            </div>\n        )\n    }\n}","import { gql } from 'apollo-boost';\n\nconst getProductsQuery = gql`\n    {\n        products {\n            id\n            name\n        }\n    }\n`\n\nconst addProductQuery = gql`\n    mutation($name: String!) {\n            addProduct(name: $name) {\n                name\n                id\n        }\n    }\n`\n\nconst getImpressionsQuery = gql`\n    query($id: ID) {\n        product(id: $id) {\n            name\n            impressions {\n                id\n                date\n            }\n        }\n    }\n`\n\nconst addImpressionQuery = gql`\n    mutation($date: String!, $productId: String!) {\n        addImpression(date: $date, productId: $productId) {\n            date\n            id\n        }\n    }\n`\n\nexport { getProductsQuery, addProductQuery, getImpressionsQuery, addImpressionQuery };","import React, { Component } from 'react';\nimport { graphql } from 'react-apollo';\nimport { flowRight as compose } from 'lodash';\n\n// Queries\nimport { addProductQuery, getProductsQuery } from '../queries/queries';\n\nclass AddProduct extends Component {\n    state = {\n        name: null,\n    }\n\n    submitForm = (e) => {\n        e.preventDefault();\n        \n        if (this.state.name == null || this.state.name === \"\") {\n            return;\n        } else {\n            if (this.state.name.slice(0,1) === \" \") {\n                return;\n            } else {\n                this.props.addProductQuery({\n                    variables: {\n                        name: this.state.name,\n                    },\n                    refetchQueries: [{ query: getProductsQuery }]\n                });\n            }\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"add\">\n                <h3 className=\"add__heading\">Add a Pressure Point:</h3>\n                <div className=\"add__line\" />\n                <form className=\"add__form\" onSubmit={this.submitForm.bind(this)}>\n                    <label className=\"add__name-heading\">Name:</label>\n                    <input className=\"add__name\" type=\"text\" onChange={(e) => this.setState({ name: e.target.value })} />\n                    <button className=\"add__button\">+</button>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default compose(\n    graphql(addProductQuery, { name: \"addProductQuery\"}),\n    graphql(getProductsQuery, { name: \"getProductsQuery\"})\n)(AddProduct);","import React, { Component } from 'react';\nimport { graphql } from 'react-apollo';\n\n// Queries\nimport { getImpressionsQuery } from '../queries/queries';\n\nclass ProductDetails extends Component {\n\n    state = {\n        startDate: '',\n        endDate: '',\n        count: 0,\n    }\n\n    toNumber = (string) => {\n        let newDate = Number(string.slice(0, 4) + string.slice(5, 7) + string.slice(8, 10));\n        return newDate;\n    }\n\n    filterDates = () => {\n        const { impressions } = this.props.data.product;\n\n        const startDate = this.toNumber(this.state.startDate);\n        const endDate = this.toNumber(this.state.endDate);\n        let count = 0;\n\n        for (let i = 0; i < impressions.length; i++) {\n            if (startDate <= this.toNumber(impressions[i].date) && this.toNumber(impressions[i].date) <= endDate) {\n                count++;\n            }\n        }\n\n        this.setState({\n            ...this.state,\n            count: count,\n        })\n    }\n\n    displayImpressions = () => {\n        const { product } = this.props.data;\n\n        if (product) {\n            return(\n                <React.Fragment>\n                    <h3 className=\"details__heading\">{product.name}</h3>\n                    <div className=\"details__line\" />\n                    <label className=\"details__heading-start\">Start Date:</label>\n                    <input className=\"details__start-date\" type=\"date\" onChange={(e) => this.setState({startDate: e.target.value})} />\n\n                    <label className=\"details__heading-end\">End Date:</label>\n                    <input className=\"details__end-date\" type=\"date\" onChange={(e) => this.setState({endDate: e.target.value})} />\n\n                    <div className=\"details__total-headings\">\n                        <p>Total Impressions:</p>\n                        <p>(since January)</p>\n                    </div>\n                    <div className=\"details__total\">{product.impressions.length}</div>\n\n                    <div className=\"details__heading-range\">\n                        <p>Impressions:</p>\n                        <p>(within date range)</p>\n                    </div>\n                    <button className=\"details__button\" onClick={this.filterDates}>Submit</button>\n\n                    <p className=\"details__range-total\">{this.state.count}</p>\n                </React.Fragment>\n            )\n        } else {\n            return(\n                <p className=\"details__unselected\">No Pressure Point selected...</p>\n            )\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"details\">\n                {this.displayImpressions()}\n            </div>\n        )\n    }\n}\n\nexport default graphql(getImpressionsQuery, {\n    options: (props) => {\n        return {\n            variables: {\n                id: props.productId\n            }\n        }\n    }\n})(ProductDetails);","import React, { Component } from 'react';\nimport './App.scss';\n\n// Components\nimport ProductList from './components/ProductList';\nimport AddProduct from './components/AddProduct';\n// import TestProducts from './components/TestProducts';// Components\nimport ProductDetails from './components/ProductDetails';\n\n// Apollo\nimport { graphql } from 'react-apollo';\n\n// Queries\nimport { getProductsQuery } from './queries/queries';\n\nclass App extends Component {\n\n\tstate = {\n        selected: null,\n    }\n\n    displayProducts = () => {\n        let data = this.props.data;\n        if (data.loading) {\n            return( <div>Loading products...</div>);\n        } else {\n            return data.products.map(product => {\n                return (\n                    <li\n                        key={product.id}\n                        onClick={(e) => {this.setState({selected: product.id})}}\n                        className={product.id === this.state.selected ? \"list__item--active\" : \"list__item\"}\n                    >\n                        { product.name }\n                    </li>\n                )\n            })\n        }\n    }\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"main\">\n\t\t\t\t<h1 className=\"main__heading\">StudioME Analytics</h1>\n\t\t\t\t<ProductList displayProducts={this.displayProducts} />\n\t\t\t\t<ProductDetails productId={this.state.selected} />\n\t\t\t\t{/* <TestProducts /> */}\n\t\t\t\t<AddProduct />\n\t\t\t</div>\n\t\t)\n\t}\n}\n\nexport default graphql(getProductsQuery)(App);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport ApolloClient from 'apollo-boost';\nimport { ApolloProvider } from 'react-apollo';\n\n// Apollo client setup\nconst client = new ApolloClient({\n\turi: 'https://studiome-analytics-server.herokuapp.com/graphql',\n})\n\nReactDOM.render(\n    <ApolloProvider client={client}><App /></ApolloProvider>\n    , document.getElementById('root'));"],"sourceRoot":""}